{
  "version": 3,
  "sources": ["../scripts/UICore.ts"],
  "sourcesContent": ["import \"./UICoreExtensions\"\nimport { UICoreValues } from \"./UICoreValues\"\nimport { nil, NO, UIObject } from \"./UIObject\"\nimport { UIRoute } from \"./UIRoute\"\nimport { UIView } from \"./UIView\"\nimport { UIViewController } from \"./UIViewController\"\n\n\n\nexport class UICore extends UIObject {\n    \n    rootViewController: UIViewController = nil\n    \n    \n    constructor(rootDivElementID: string, rootViewControllerClass: typeof UIViewController) {\n        \n        super()\n        \n        UICoreValues.RootViewControllerClass = rootViewControllerClass\n        UICoreValues.main = this\n        \n        const rootViewElement = document.getElementById(rootDivElementID)\n        const rootView = new UIView(rootDivElementID, rootViewElement)\n        rootView.pausesPointerEvents = NO //YES;\n        \n        if (UICoreValues.RootViewControllerClass) {\n            \n            if (!(UICoreValues.RootViewControllerClass.prototype instanceof UIViewController) ||\n                (UICoreValues.RootViewControllerClass as any) === UIViewController) {\n                \n                console.log(\n                    \"Error, UICore.RootViewControllerClass must be a or a subclass of UIViewController, falling back to UIViewController.\")\n                \n                UICoreValues.RootViewControllerClass = UIViewController\n                \n            }\n            \n            this.rootViewController = new UICoreValues.RootViewControllerClass(rootView)\n            \n        }\n        else {\n            \n            this.rootViewController = new UIViewController(rootView)\n            \n        }\n        \n        this.rootViewController.viewWillAppear()\n        this.rootViewController.viewDidAppear()\n        \n        \n        this.rootViewController.view.addTargetForControlEvent(\n            UIView.controlEvent.PointerUpInside,\n            function (sender, event) {\n                \n                (document.activeElement as HTMLElement).blur()\n                \n            }\n        )\n        \n        \n        \n        const windowDidResize = function (this: UICore) {\n            \n            // Doing layout two times to prevent page scrollbars from confusing the layout\n            this.rootViewController._triggerLayoutViewSubviews()\n            UIView.layoutViewsIfNeeded()\n            \n            this.rootViewController._triggerLayoutViewSubviews()\n            //UIView.layoutViewsIfNeeded()\n            \n            this.rootViewController.view.broadcastEventInSubtree({\n                \n                name: UICoreValues.broadcastEventName.WindowDidResize,\n                parameters: nil\n                \n            })\n            \n        }\n        \n        window.addEventListener(\"resize\", windowDidResize.bind(this))\n        \n        const didScroll = function (this: UICore) {\n            \n            //code\n            \n            this.rootViewController.view.broadcastEventInSubtree({\n                \n                name: UIView.broadcastEventName.PageDidScroll,\n                parameters: nil\n                \n            })\n            \n            \n            \n        }.bind(this)\n        \n        window.addEventListener(\"scroll\", didScroll, false)\n        \n        const hashDidChange = function (this: UICore) {\n            \n            //code\n            \n            this.rootViewController.handleRouteRecursively(UIRoute.currentRoute)\n            \n            this.rootViewController.view.broadcastEventInSubtree({\n                \n                name: UICoreValues.broadcastEventName.RouteDidChange,\n                parameters: nil\n                \n            })\n            \n            \n        }.bind(this)\n        \n        window.addEventListener(\"hashchange\", hashDidChange.bind(this), false)\n        \n        hashDidChange()\n        \n        \n        \n    }\n    \n    \n    \n    \n    \n    static loadClass(className: string) {\n        \n        if (window[className]) {\n            return\n        }\n        \n        document.writeln(\"<script type='text/javascript' src='dist/UICore/\" + className + \".js'></script>\")\n        \n    }\n    \n    \n}\n\n\nUICoreValues.RootViewControllerClass = nil\n\n\nArray.prototype.indexOf || (Array.prototype.indexOf = function (d, e) {\n    var a\n    if (null == this) {\n        throw new TypeError(\"\\\"this\\\" is null or not defined\")\n    }\n    const c = Object(this),\n        b = c.length >>> 0\n    if (0 === b) {\n        return -1\n    }\n    a = +e || 0\n    Infinity === Math.abs(a) && (a = 0)\n    if (a >= b) {\n        return -1\n    }\n    for (a = Math.max(0 <= a ? a : b - Math.abs(a), 0); a < b;) {\n        if (a in c && c[a] === d) {\n            return a\n        }\n        a++\n    }\n    return -1\n})\n\n\n\n\n\n\n\n\n\n\n"],
  "mappings": ";;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BAAO;AACP,0BAA6B;AAC7B,sBAAkC;AAClC,qBAAwB;AACxB,oBAAuB;AACvB,8BAAiC;AAI1B,MAAM,eAAe,yBAAS;AAAA,EAKjC,YAAY,kBAA0B,yBAAkD;AAEpF,UAAM;AALV,8BAAuC;AAOnC,qCAAa,0BAA0B;AACvC,qCAAa,OAAO;AAEpB,UAAM,kBAAkB,SAAS,eAAe,gBAAgB;AAChE,UAAM,WAAW,IAAI,qBAAO,kBAAkB,eAAe;AAC7D,aAAS,sBAAsB;AAE/B,QAAI,iCAAa,yBAAyB;AAEtC,UAAI,EAAE,iCAAa,wBAAwB,qBAAqB,6CAC3D,iCAAa,4BAAoC,0CAAkB;AAEpE,gBAAQ;AAAA,UACJ;AAAA,QAAsH;AAE1H,yCAAa,0BAA0B;AAAA,MAE3C;AAEA,WAAK,qBAAqB,IAAI,iCAAa,wBAAwB,QAAQ;AAAA,IAE/E,OACK;AAED,WAAK,qBAAqB,IAAI,yCAAiB,QAAQ;AAAA,IAE3D;AAEA,SAAK,mBAAmB,eAAe;AACvC,SAAK,mBAAmB,cAAc;AAGtC,SAAK,mBAAmB,KAAK;AAAA,MACzB,qBAAO,aAAa;AAAA,MACpB,SAAU,QAAQ,OAAO;AAErB,QAAC,SAAS,cAA8B,KAAK;AAAA,MAEjD;AAAA,IACJ;AAIA,UAAM,kBAAkB,WAAwB;AAG5C,WAAK,mBAAmB,2BAA2B;AACnD,2BAAO,oBAAoB;AAE3B,WAAK,mBAAmB,2BAA2B;AAGnD,WAAK,mBAAmB,KAAK,wBAAwB;AAAA,QAEjD,MAAM,iCAAa,mBAAmB;AAAA,QACtC,YAAY;AAAA,MAEhB,CAAC;AAAA,IAEL;AAEA,WAAO,iBAAiB,UAAU,gBAAgB,KAAK,IAAI,CAAC;AAE5D,UAAM,YAAY,WAAwB;AAItC,WAAK,mBAAmB,KAAK,wBAAwB;AAAA,QAEjD,MAAM,qBAAO,mBAAmB;AAAA,QAChC,YAAY;AAAA,MAEhB,CAAC;AAAA,IAIL,EAAE,KAAK,IAAI;AAEX,WAAO,iBAAiB,UAAU,WAAW,KAAK;AAElD,UAAM,gBAAgB,WAAwB;AAI1C,WAAK,mBAAmB,uBAAuB,uBAAQ,YAAY;AAEnE,WAAK,mBAAmB,KAAK,wBAAwB;AAAA,QAEjD,MAAM,iCAAa,mBAAmB;AAAA,QACtC,YAAY;AAAA,MAEhB,CAAC;AAAA,IAGL,EAAE,KAAK,IAAI;AAEX,WAAO,iBAAiB,cAAc,cAAc,KAAK,IAAI,GAAG,KAAK;AAErE,kBAAc;AAAA,EAIlB;AAAA,EAMA,OAAO,UAAU,WAAmB;AAEhC,QAAI,OAAO,YAAY;AACnB;AAAA,IACJ;AAEA,aAAS,QAAQ,qDAAqD,YAAY,iBAAgB;AAAA,EAEtG;AAGJ;AAGA,iCAAa,0BAA0B;AAGvC,MAAM,UAAU,YAAY,MAAM,UAAU,UAAU,SAAU,GAAG,GAAG;AAClE,MAAI;AACJ,MAAI,QAAQ,MAAM;AACd,UAAM,IAAI,UAAU,+BAAiC;AAAA,EACzD;AACA,QAAM,IAAI,OAAO,IAAI,GACjB,IAAI,EAAE,WAAW;AACrB,MAAI,MAAM,GAAG;AACT,WAAO;AAAA,EACX;AACA,MAAI,CAAC,KAAK;AACV,eAAa,KAAK,IAAI,CAAC,MAAM,IAAI;AACjC,MAAI,KAAK,GAAG;AACR,WAAO;AAAA,EACX;AACA,OAAK,IAAI,KAAK,IAAI,KAAK,IAAI,IAAI,IAAI,KAAK,IAAI,CAAC,GAAG,CAAC,GAAG,IAAI,KAAI;AACxD,QAAI,KAAK,KAAK,EAAE,OAAO,GAAG;AACtB,aAAO;AAAA,IACX;AACA;AAAA,EACJ;AACA,SAAO;AACX;",
  "names": []
}
