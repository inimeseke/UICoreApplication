if ("contains" in Array.prototype == false) {
  Array.prototype.contains = function(element) {
    var result = this.indexOf(element) != -1;
    return result;
  };
}
if ("contains" in String.prototype == false) {
  String.prototype.contains = function(string) {
    var result = this.indexOf(string) != -1;
    return result;
  };
}
onmessage = function(event) {
  var workerResult = filterKeyValuePathData(event.data.filteringString, event.data.data, event.data.excludedData, event.data.dataKeyPath);
  workerResult.identifier = event.data.identifier;
  workerResult.instanceIdentifier = event.data.instanceIdentifier;
  postMessage(workerResult);
};
function filterKeyValuePathData(filteringString, data, excludedData, dataKeyPath) {
  function valueForKeyPath(keyPath, object) {
    var keys = keyPath.split(".");
    var currentObject = object;
    keys.forEach(function(key, index, array) {
      currentObject = currentObject[key];
    });
    return currentObject;
  }
  var filteredData = [];
  var filteredIndexes = [];
  if (filteringString) {
    var filteringStringWords = [];
    filteringString.split(" ").forEach(function(word, index, array) {
      if (word) {
        filteringStringWords.push(word.toLowerCase());
      }
    });
    data.forEach(function(dataObject, index, array) {
      var dataString = valueForKeyPath(dataKeyPath, dataObject);
      var lowercaseDataString = dataString.toLowerCase();
      var wordsFound = [];
      filteringStringWords.forEach(function(word) {
        wordsFound.push(lowercaseDataString.contains(word) && !excludedData.contains(dataString));
      });
      if (wordsFound.contains(true) && !wordsFound.contains(false)) {
        filteredData.push(dataObject);
        filteredIndexes.push(index);
      }
    });
  } else if (excludedData.length) {
    filteredData = data.forEach(function(dataObject, index, array) {
      if (excludedData.indexOf(dataObject) == -1) {
        filteredData.push(dataObject);
        filteredIndexes.push(index);
      }
    });
  } else {
    filteredData = data;
    data.forEach(function(object, index, array) {
      filteredIndexes.push(index);
    });
  }
  return { "filteredData": filteredData, "filteredIndexes": filteredIndexes };
}
//# sourceMappingURL=UIKeyValueStringFilterWebWorker.worker.js.map
